<html>
    <head>
        <title>Bolton Scouts</title>

        <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

        <link href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" rel="stylesheet">

        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    </head>
    <body>
        <div id="map" class="w-screen h-screen z-0"></div>
        <div class="absolute flex top-0 left-0 z-50 items-center w-screen h-screen">
            <div class="container flex justify-around mx-auto">
                <div class="bg-white p-8 shadow w-96">
                    <img src="https://brand.boltonmoorlandscouts.org.uk/assets/logos/horizontal_purple.png" alt="Bolton Moorland Scouts" class="h-24 -ml-4 mb-4">
    
                    <p class="text-gray-800">Covering:</p>
                    <ul class="text-sm text-gray-800 list-disc ml-4">
                        <li>Astley Bridge</li>
                        <li>Bromley Cross</li>
                        <li>Breighmet</li>
                        <li>Bradshaw</li>
                        <li>Eagley</li>
                        <li>Horwich</li>
                    </ul>
    
                    <p class="mt-6">
                        <a href="http://boltonmoorlandscouts.org.uk?ref=boltonscouts.org.uk" class="py-3 px-4 text-white hover:underline" style="background-color: #7413dc">boltonmoorlandscouts.org.uk<i class="fas fa-angle-right ml-2"></i></i></a>
                    </p>
                </div>
    
                <div class="bg-white p-8 shadow w-96">
                    <img src="https://bswfscouts.org.uk/wp-content/uploads/2020/03/x5dcebdf6-72ac-11ea-9c89-22c489361b0f-1-e1585591778824.png.pagespeed.ic.TCWCHhNHAU.webp" alt="Bolton Moorland Scouts" class="h-24 mb-4">
    
                    <p class="text-gray-800">Covering:</p>
                    <ul class="text-sm text-gray-800 list-disc ml-4">
                        <li>Farnworth</li>
                        <li>Kearsley</li>
                        <li>Stoneclough</li>
                        <li>Little Lever</li>
                        <li>Great Lever</li>
                        <li>Westhoughton</li>
                    </ul>
    
                    <p class="mt-6">
                        <a href="http://bswfscouts.org.uk?ref=boltonscouts.org.uk" class="py-3 px-4 text-white hover:underline" style="background-color: #7413dc">bswfscouts.org.uk<i class="fas fa-angle-right ml-2"></i></i></a>
                    </p>
                </div>
            </div>
        </div>
       
        <script>
            L.TileLayer.Grayscale = L.TileLayer.extend({
	options: {
		quotaRed: 40,
		quotaGreen: 71,
		quotaBlue: 8,
		quotaDividerTune: 0,
		quotaDivider: function() {
			return this.quotaRed + this.quotaGreen + this.quotaBlue + this.quotaDividerTune;
		}
	},

	initialize: function (url, options) {
		options = options || {}
		options.crossOrigin = true;
		L.TileLayer.prototype.initialize.call(this, url, options);

		this.on('tileload', function(e) {
			this._makeGrayscale(e.tile);
		});
	},

	_createTile: function () {
		var tile = L.TileLayer.prototype._createTile.call(this);
		tile.crossOrigin = "Anonymous";
		return tile;
	},

	_makeGrayscale: function (img) {
		if (img.getAttribute('data-grayscaled'))
			return;

                img.crossOrigin = '';
		var canvas = document.createElement("canvas");
		canvas.width = img.width;
		canvas.height = img.height;
		var ctx = canvas.getContext("2d");
		ctx.drawImage(img, 0, 0);

		var imgd = ctx.getImageData(0, 0, canvas.width, canvas.height);
		var pix = imgd.data;
		for (var i = 0, n = pix.length; i < n; i += 4) {
                        pix[i] = pix[i + 1] = pix[i + 2] = (this.options.quotaRed * pix[i] + this.options.quotaGreen * pix[i + 1] + this.options.quotaBlue * pix[i + 2]) / this.options.quotaDivider();
		}
		ctx.putImageData(imgd, 0, 0);
		img.setAttribute('data-grayscaled', true);
		img.src = canvas.toDataURL();
	}
});

L.tileLayer.grayscale = function (url, options) {
	return new L.TileLayer.Grayscale(url, options);
};

            var mapOptions = {
                center: [53.576866, -2.428219],
                zoom: 13,
                zoomControl: false
            }
            
            var map = new L.map('map', mapOptions);
            var layer = new L.tileLayer.grayscale('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors'
            });
            map.addLayer(layer);
        </script>
    </body>
</html>
